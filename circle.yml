general: 
    artifacts:
        - /home/ubuntu/worksaldo/android/build/outputs/lint-results.html
        - /home/ubuntu/worksaldo/android/build/outputs/androidTest-results/connected/*.xml
        
machine:
    environment:
        ANDROID_HOME: /home/ubuntu/android
    java:
        version: oraclejdk7

dependencies:
    cache_directories:
        - ~/.android
        - ~/android
    override:
        - (echo "Downloading Android SDK v23 now!")
        - (source scripts/environmentSetup.sh && getAndroidSDK)

test:
    pre:
        - $ANDROID_HOME/tools/emulator -avd testAVD -no-skin -no-audio -no-window:
            background: true
        - (./gradlew assembleDebug):
            timeout: 1200
        - (./gradlew assembleDebugTest):
            timeout: 1200
        - (source scripts/environmentSetup.sh && waitForAVD)
        - pip install codecov

    override:
        - (echo "Running JUnit tests!")
        - (./gradlew connectedAndroidTest)
    success:
        - codecov --token=9ca0835f-29ae-4c98-bd57-bed8b39c8fb0
        - bash <(curl -s https://codecov.io/bash)
